>ここでは、インクルーシブなブログ記事の構成について探りましょう。ブログ記事はパーマリンクで見ることができ、親ページの主要なコンテンツを構成する要素でもあります

訳注:
パーマリンク (permalink) とはブログの個々の記事を見るためにつけられたURLや、そのURLが指定されたリンクのことを指しますが、ここではそのリンク先で見られる個別記事ページの事を指しています。



><g1><main></g1>要素そのものが独特な動作を提供しているのは確かですが、これらのメリットは、不適切な配置によって損なわれることもあります。たとえば、単一のページで複数の<g2><main></g2>要素を使ったり、<g3><main></g3>を使用してDOM全体をラップしたりする使い方です

訳注:
原著が出版された2016年10月の時点では、W3CのHTML5.0勧告に以下のような記述がありました。

>Authors must not include more than one main element in a document. 

これによれば、コンテンツ制作者はひとつのドキュメント内で複数のmain要素を使ってはならないということになります。しかし、WHATWGのHTML Living Standardには該当の記述はありません。その後、W3Cのドキュメントでも、2016年3月10日のHTML5.1の草案から該当部分が削除されています。
なお、WAI-ARIA1.1では「コンテンツ制作者はdocumentやapplicationの中で複数の要素にmainロールをマークづけすべきではない」という主旨のことが書かれています。これらを総合すると、複数のmainは望ましくないが、禁止まではされてはいない、ということになります。

参考:
HTML5 W3C Recommendation 28 October 2014 - 4.4.14 The main element
http://www.w3.org/TR/2014/REC-html5-20141028/grouping-content.html#the-main-element

HTML5.1 W3C Working Draft, 10 March 2016 - 4.4.14 The main element
http://www.w3.org/TR/2016/WD-html51-20160310/grouping-content.html#the-main-element

Accessible Rich Internet Applications (WAI-ARIA) 1.1 - 5.4 Definition of Roles
http://www.w3.org/TR/wai-aria-1.1/#main



><g2><h1></g2>テキストは実質的に、ドキュメントの本文であるスーパーセクションのラベルとなります。このため、1ページに複数あるのは論理的に正しくありません。
訳注:
HTML5のセクショニングアルゴリズムでは、bodyもセクションを構成します。そのため、bodyに対する見出しがない状態でsection要素を使うと、最上位セクションに見出しが付けられていない状態になります。たとえば以下のようなマークアップがあるとします。

<body>
<section>
<h1>最初の見出し</h1>
<p>本文</p>
</section>
<section>
<h1>次の見出し</h1>
<p>本文</p>
</section>
</body>

このとき、アウトラインは以下のようになり、最上位に見出しのないセクションができてしまいます。

1.(untitled section)
  1-1.最初の見出し
  1-2.次の見出し

なお、明示的セクションを使わない場合は、h1要素を複数使うとそのままbodyが分割されます。
HTML Living Standardには "A document can contain multiple top-level headings:" として以下のようなサンプルが掲載されています。

<!DOCTYPE HTML>
<html lang=en>
<title>Alphabetic Fruit</title>
<h1>Apples</h1>
<p>Pomaceous.</p>
<h1>Bananas</h1>
<p>Edible.</p>
<h1>Carambola</h1>
<p>Star.</p>

このときのアウトラインは以下のようになり、見出しのないセクションは現れません。つまり2017年現在の仕様では、書き方によっては複数のh1要素を使うこともできるということです。

1. Apples 
2. Bananas 
3. Carambola 

参考:
HTML Living Standard - 4.3.11.2 Sample outlines
https://html.spec.whatwg.org/multipage/semantics.html#sample-outlines




>ユーザーに目立たない複数のオプションを提供することを、<g8>マルチモダリティ</g8>と呼ぶことがあります。
訳注:
ユーザーインターフェイス論における「マルチモダリティ」という言葉は、一般的には、複数の異なる感覚を用いて入出力ができることを指します。たとえば、目で見るだけでなく音で聞くこともできる、キーボードで入力するだけでなく音声入力もできる、といった状況をマルチモダリティと呼びます。



>しかし、これは<g8><g9>どのユーザーエージェントにも実装されておらず</g9></g8><g10><g11><g12>（脚注38）</g12></g11></g10>、今後実装されそうな兆候もありません。
訳注:
ユーザーエージェントをブラウザに限定しなければ、セクショニングアルゴリズムの実装は存在します。HTML5.1の勧告には、適合性チェッカーやブラウザ拡張による実装はあるものの、ブラウザネイティブの実装がないという主旨のことが書かれています。

参考: HTML 5.1 - 4.3.10.1. Creating an outline
http://www.w3.org/TR/html51/sections.html#creating-an-outline



>スクリーンリーダーのJAWSは（そしてJAWS<g3>だけ</g3>が）、この要素に入るときに「アーティクル開始」、出るときに「アーティクル終了」と読み上げます。
訳注:
最近ではVoiceOverも対応したようで、article要素に差し掛かると「記事 ランドマーク」のように読み上げます (本文に書かれているように、WAI-ARIA1.1の仕様上はarticleロールはランドマークではないのですが、VoiceOverはランドマークとして扱うようです)。



>以下は、このテストの<g3><g4>Wikipediaでの解説ページ</g4></g3><g5><g6><g7>（脚注47）</g7></g6></g5>からの要約です。<分節 1081>
(※訳注は表の下に挿入)
訳注:
学年はアメリカ合衆国の教育における学年です。7～9学年が日本における中学生程度、10〜12学年が高校生程度に相当します。プレイン・イングリッシュは主に政府の公式文書などに使われる、専門用語を避けて一般の人にわかりやすくした英語を指します。



>たとえばNVDAでは、<g2>Insert</g2> + <g3>F7</g3>キーで<g1>要素リスト</g1>ダイアログを開き、ページの見出しのリストを見ることができます。
訳注:
NVDAのコマンド一覧表では、要素リストを開く操作は NVDA + F7 と表記されています。NVDAでは、NVDAの機能を使う際に押すキーを「NVDAキー」と呼んでおり、初期設定ではこれをInsertキーに割り当てていますが、設定で別のキーを使うようにすることもできます。



>グリッドシステムとは異なり、フローシステムでは、見出し、段落、リスト、画像、ビデオ、といった次々現れるフロー要素どうしの関係性を、ひとつのカラムだけで表現します。
訳注:
HTML5におけるフロー要素の分類は非常に幅広く、em要素などのフレーズ要素も含まれていますが、著者は主に <p>、<div> といった要素 (HTML4で言うところのブロックレベル要素) をイメージしています。前著「コーディングWebアクセシビリティ」をお持ちの方は、「4-1 分割する」の章をごらんください。

参考:
HTML Living Standard - 3.2.5.2.2 Flow content
https://html.spec.whatwg.org/multipage/dom.html#flow-content



><g1>display:none;</g1>の宣言は、マージンも含めて要素を削除します。
訳注:
:empty擬似クラスは、子ノードを持たない要素にマッチします。空要素にもマッチするため、このセレクタをそのまま使うとimg、br、hrなども全て削除されてしまいます。imgが消えては困る場合は、main :not(img):emptyのようにしてimgを除外するか、main p:emptyのようにして空のpだけにマッチさせると良いでしょう。

