<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
PUBLIC "-//W3C//DTD XHTML 1.1//EN"
       "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><title>A Registration Form | Inclusive Design Patterns</title><link rel="stylesheet" href="css/book.css" type="text/css"/><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><meta name="EPB-UUID" content="24CC751A-5435-483D-851C-00DC23A33E17"/></head><body><div class="body"><h1>A Registration Form</h1><p>My first forays into web design at the turn of the century revolved around images, image maps to link parts of those images to other pages of images, and nested <code>&lt;table&gt;</code> elements to hold the whole debacle together. Underperforming, unresponsive, not cross-browser compatible: just some of the things you could condemn my early handiwork for.</p><p>My current output is hardly perfect, but it has benefited from a change in mindset, an acknowledgement that web pages aren&#8217;t merely pinboards for images. Really, web pages are terminals: they accept information (input) and display information (output).</p><p>Web forms take care of the input part. Making sure forms are inclusive is paramount, because all people should be able to contribute to and not just consume the web. So, what are we dealing with? It&#8217;s a mixed bag: form elements piggyback OS functionality and are keyboard and screen reader accessible as standard &mdash; at least when marked up correctly. So that&#8217;s good. On the other hand, forms are a 10,000-volt electromagnet for attracting usability problems.</p><p>For this simple registration form pattern, we shall embrace standards while attempting to tiptoe nimbly around potential usability failures. The relationship between standards and usability is where we find inclusion.</p><h2>The Form In Context</h2><p>Before diving into constructing the registration form itself, it&#8217;s worth acknowledging the context in which we are likely to find it. Despite the virtues of modularity, it can&#8217;t be helped that some patterns are informed by context and are better designed where context is considered first.</p><p>Conventionally, registration forms are counterparts to login forms provided for users who already have accounts. In fact, it&#8217;s usually the login form that you would encounter first, with an option to register instead. This registration option usually takes the form of some tiny link text reading &#8220;Don&#8217;t have an account?&#8221; and placed <em>after</em> the login form&#8217;s submit button.</p><p><img src="images/forms_register_link.png" alt="At the bottom of the form, the login button with small register text link underneath it." /></p><p>The thinking here is often that the no account option doesn&#8217;t need to be a big deal because <em>most</em> new users will have gone directly to the homepage, read the entire sales pitch for the application and pressed the sign-up call to action there.</p><p>Making assumptions about the way visitors enter and move through your app is dangerous territory anyway, but for certain users the usability here is even more aggravating. Screen reader operators traversing the page from top to bottom methodically will not realize the option to register is present unless they go past the login form. In addition, by linking to the registration form on a separate page, they&#8217;d have to make their way down to the form from the top of that newly loaded page.</p><p>This is one of the reasons we create the ability to bypass blocks of content using skip links, headings and landmark regions, as discussed in &#8220;A Blog Post.&#8221; This comes under WCAG&#8217;s <a href="https://www.w3.org/TR/WCAG20/#navigation-mechanisms"><span class="link">2.4.1 Bypass Blocks</span></a><sup><a href="#fn25_1"><span class="sup_link">1</span></a></sup> success criterion.</p><p>However, a clearer solution for <em>all</em> users would be to present them with a choice of login or registration at the outset. In the illustration below, &#8220;Login&#8221; is selected by default but in a clear relationship with the unselected register option.</p><p><img src="images/forms_login_register_tabs.png" alt="At the top of the form, a selected login tab with an unselected register tab to its right." /></p><h3>The Login/Register Toolbar</h3><p>It&#8217;s important the choice being presented to the user is clear both visually and non-visually. But despite what certain vocal accessibility pundits might have you believe, there&#8217;s really no right or wrong way to achieve this kind of thing. It&#8217;s down to your discretion as a designer to find the most effective solution.</p><p>One option would be to design the login and register options as tabs in a fully-fledged WAI-ARIA tab interface. I talk about such interfaces at length in the book &#8220;<a href="https://shop.smashingmagazine.com/products/apps-for-all"><span class="link">Apps For All: Coding Accessible Web Applications</span></a><sup><a href="#fn25_2"><span class="sup_link">2</span></a></sup>.&#8221; Also available is an <a href="http://heydonworks.com/practical_aria_examples/#tab-interface"><span class="link">accompanying demo</span></a><sup><a href="#fn25_3"><span class="sup_link">3</span></a></sup>.</p><p>Since we are only dealing with two options (tabs), I think this complex widget is overkill. A simpler way to communicate the choice and the current selection would be to construct a little <a href="http://w3c.github.io/aria/aria/aria.html#toolbar"><span class="link"><code>toolbar</code></span></a><sup><a href="#fn25_4"><span class="sup_link">4</span></a></sup>, like the following.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Welcome<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span>"toolbar"</span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation">=</span>"Login or register"</span> <span class="token attr-name">aria-controls</span><span class="token attr-value"><span class="token punctuation">=</span>"forms"</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation">=</span>"true"</span><span class="token punctuation">&gt;</span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation">=</span>"false"</span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"forms"</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"login"</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- the login form --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"register"</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- the registration form --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><h4>Notes</h4><p class="list"><span class="bullet">•</span>Pressing a button changes that button to <a href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span class="link"><code>aria-pressed="true"</code></span></a><sup><a href="#fn25_5"><span class="sup_link">5</span></a></sup> and reveals the corresponding form. A CSS style should be provided to show that this button is the selected one, possibly with the <code>[aria-pressed="true"]</code> attribute selector.</p><p class="list"><span class="bullet">•</span>When screen reader users focus the first button, &#8220;Login or register toolbar, login toggle button, selected&#8221; (or similar, depending on the screen reader) is announced. This informs users that they are interacting with a toolbar widget presenting them with a choice of &#8220;Login or register&#8221; and that the &#8220;login&#8221; option is currently activated.</p><p class="list last-item"><span class="bullet">•</span>The relationship between the toolbar and the subject <code>#forms</code> container is also communicated via <code>aria-controls</code> to supporting software, like the JAWS screen reader. This is only an enhancement: the reveal of the corresponding form will place it next in focus order, making it easy to reach by keyboard anyway.</p><h2>The Basic Form</h2><p>Now let&#8217;s shift our focus to just the registration form itself. We&#8217;ve already touched on harnessing form controls in &#8220;A Filter Widget.&#8221; This form takes a more familiar, well, <em>form</em>, facilitating text input by the user.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"register"</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span><span class="token punctuation">&gt;</span></span>Your email address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span><span class="token punctuation">&gt;</span></span>       
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span><span class="token punctuation">&gt;</span></span>Choose a username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span>"e.g. HotStuff666"</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>Choose a password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"submit"</span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre><h3>Labeling</h3><p>In Inclusive Forms 101, we must ensure that all interactive elements have an accessible label associated with them. In the case of the submit button, the text node is the accessible label. That is, when you focus the button, &#8220;Register&#8221; is announced as the label.</p><p>For elements that accept user input like text inputs, an auxiliary label must be associated with it. The standard way to achieve this is by using a <code>&lt;label&gt;</code> element, which takes a <code>for</code> attribute. The <code>for</code> attribute associates the label with an input using its <code>id</code> value. This is one of the reasons you should ensure <code>id</code>s are unique. When they are not, you would fail WCAG&#8217;s <a href="https://www.w3.org/TR/WCAG20/#ensure-compat"><span class="link">4.1.1 Parsing</span></a><sup><a href="#fn25_6"><span class="sup_link">6</span></a></sup> rule.</p><p>In the case of the password input, the agreed cipher &mdash; the matching content of the <code>for</code> and <code>id</code> values &mdash; is simply &#8220;password&#8221;:</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>Choose a password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span></code></pre><p>To appreciate why labels have to be explicitly associated with controls in this way, you have to appreciate how screen reader operators traverse forms. Unlike prose content, where users may use the down arrow to go from element to element, forms are operated by moving directly between one field and the next. Label elements, therefore, are jumped over: if they weren&#8217;t explicitly connected to the interactive elements they were describing, they&#8217;d be missed.</p><p>In my example, when a screen reader user focuses the password field, &#8220;Choose a password, secure input&#8221; (or similar) would be announced.</p><p>Senior accessibility engineer <a href="http://tink.uk/proposed-aria-password-role/"><span class="link">Léonie Watson notes that a role of <code>password</code> is being mooted</span></a><sup><a href="#fn25_7"><span class="sup_link">7</span></a></sup> for the WAI-ARIA (2.0) specification. This would enable developers to communicate the security of a custom field without necessarily ensuring that security (masking the inputed characters) is actually present. WAI-ARIA only affects semantics, not general behavior. This is why standard elements and attributes such as <code>type="password"</code> are a safer choice where available. They pair semantics with standard behaviors automatically.</p><h4>The <code>placeholder</code> Attribute</h4><p>The <code>placeholder</code> attribute is a relatively new addition to the HTML specification. It was created in response to developers wanting to give hints for the type of content the user should provide. The key word here is <em>hints</em>: the <code>placeholder</code> is not a labeling method by itself and should only be used to provide <em>supplemental information</em>.</p><p>In the <code>#username</code> example, &#8220;Choose a username&#8221; is the (accessible) label and &#8220;e.g. HotStuff666&#8221; is provided just to get the user&#8217;s imagination kick-started.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span><span class="token punctuation">&gt;</span></span>Choose a username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span>"e.g. HotStuff666"</span><span class="token punctuation">&gt;</span></span></code></pre><p>By default, the <code>placeholder</code> attribute is shown as gray text, which can cause contrast issues, especially where the input uses a background color. Instead of differentiating the placeholder by diminishing its contrast, I suggest using a different method, such as italicization.</p><p><img src="images/forms_placeholder_contrast2.png" alt="The left example shows the placeholder text in default gray. The right uses a custom italic style with a darker color." /></p><p>Styling the placeholder is possible in most browsers with the help of some standard and proprietary properties:</p><pre><code class=" language-css"><span class="token selector">::placeholder </span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">::-webkit-input-placeholder </span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">::-moz-placeholder </span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>(<strong>Note:</strong> Each rule is in a separate declaration block rather than a comma-delimited list. Browsers will not parse a combined block if it contains unrecognized, proprietary selectors.)</p><p>Some screen readers and browsers do not support <code>placeholder</code>, so using it to supplant a proper label will result in missing information. But that&#8217;s not the only problem: any sighted users interacting with the input will find the surrogate label disappears as soon as they start typing. This produces cognitive accessibility issues and is broadly uninclusive as an interface pattern. The browser&#8217;s autocompletion routine could also populate multiple fields, of course. This too would eradicate visible labels and make it difficult for the user to check the automatic values against what the fields intended.</p><blockquote><p>&#8220;Using placeholder as a label is esp. bad when combined with autofill. Just had a whole form autofilled and I have no clue what anything is.&#8221; &ndash; <a href="https://twitter.com/LeaVerou/status/758386597012185088"><span class="link">Lea Verou, on Twitter</span></a><sup><a href="#fn25_8"><span class="sup_link">8</span></a></sup></p></blockquote><p>Sometimes it&#8217;s tempting to remove visible labels and rely on <code>placeholder</code> attributes to save space (or <em>screen estate</em> if you prefer) but that&#8217;s hardly a good reason to diminish the usability of a form.</p><p><img src="images/forms_placeholder_disappear.png" alt="Left unfocused text field shows placeholder. Right focused text field does not, leaving the user to ponder what it was for." /></p><p>You should prioritize making room for the label from the outset, in mockups and prototypes. However, there exists an innovative solution which uses the label <em>as</em> the placeholder. The <a href="http://bradfrost.com/blog/post/float-label-pattern/"><span class="link">float label pattern</span></a><sup><a href="#fn25_9"><span class="sup_link">9</span></a></sup> by <a href="https://twitter.com/mds"><span class="link">Matt D Smith</span></a><sup><a href="#fn25_10"><span class="sup_link">10</span></a></sup> animates the label out of the way of the user&#8217;s cursor on focus. Be aware, though, that since it treats the label and placeholder as one and the same, there is no opportunity to supply a hint or example.</p><h4>A Note on Grouping</h4><p>The <code>&lt;fieldset&gt;</code> element is proffered for grouping related form fields under a common label: a <code>&lt;legend&gt;</code>. In some screen readers, this results in the <code>&lt;legend&gt;</code>&#8217;s content being concatenated with each field&#8217;s <code>&lt;label&gt;</code>.</p><p>We <em>could</em> adapt our form to include this grouping mechanism like so:</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"register"</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">&gt;</span></span>Registration<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span><span class="token punctuation">&gt;</span></span>Your email address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span><span class="token punctuation">&gt;</span></span>       
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span><span class="token punctuation">&gt;</span></span>Choose a username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"username"</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span>"e.g. HotStuff666"</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>Choose a password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"submit"</span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre><p>This is technically valid, but it creates a lot of unnecessary noise; that is, focusing each input in turn would announce the extended labels of &#8220;Registration: Your email address,&#8221; &#8220;Registration: Choose a username,&#8221; and so on.</p><p>When programming code day in and day out, we habituate ourselves to thinking of things as right or wrong, true or false. That a <code>&lt;fieldset&gt;</code> in this context is not technically invalid or nonconforming might lead us to think it is the opposite: virtuous, correct &mdash; <em>mandatory</em> even.</p><p>HTML does not hold fast to the clear, procedural logic of imperative programming languages, so it&#8217;s better not to think of them as similar. Structures of HTML, like the structures of natural language it annotates, should be judged in similarly nuanced terms: what helps or hinders; what&#8217;s too little or too much. In the current context, the <code>&lt;fieldset&gt;</code> and <code>&lt;legend&gt;</code> create too much verbosity for little to no gain, so probably shouldn&#8217;t be there.</p><p>Bearing in mind that <code>&lt;fieldset&gt;</code>s are pointless without <code>&lt;legend&gt;</code>s, you can use the following three rules of thumb to decide if a <code>&lt;fieldset&gt;</code> is appropriate.</p><p class="list"><span class="digit">1. </span>Is there more than one distinct set of fields in total, in the same form or context? <em>Yes?</em> Use <code>&lt;fieldset&gt;</code>s. <em>No?</em> Don&#8217;t use <code>&lt;fieldset&gt;</code>s.</p><p class="list"><span class="digit">2. </span>Does a set actually only have one field in it? <em>Yes?</em> You don&#8217;t need a <code>&lt;fieldset&gt;</code>. <em>No?</em> Use a <code>&lt;fieldset&gt;</code> if (1) applies.</p><p class="list last-item"><span class="digit">3. </span>Can you think of a <code>&lt;legend&gt;</code> that would make sense or aid comprehension if used with each of the <code>&lt;fieldset&gt;</code>&#8217;s field labels? <em>Yes?</em> Use a <code>&lt;fieldset&gt;</code>. <em>No?</em> Don&#8217;t use a <code>&lt;fieldset&gt;</code>.</p><h2>Required Fields</h2><p>Our register form has some <em>required</em> fields, which cannot be left blank. In fact, <em>all</em> the fields are required: for the sake of a simple UX we&#8217;re not asking anything which isn&#8217;t completely critical to signing up the user.</p><p>Denoting required fields inclusively is a mixture of standards and convention. For many people, an asterisk (<em>&#x002a;</em>) character suffixing the field label is familiar. I can place it in a <code>&lt;strong&gt;</code> element for the purposes of making it red, if I think that will increase its comprehensibility:</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span><span class="token punctuation">&gt;</span></span>Your email address <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>"red"</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span><span class="token punctuation">&gt;</span></span></code></pre><p>For screen reader users, the label is announced as usual, including the asterisk, as &#8220;Your email address asterisk.&#8221; The term &#8220;asterisk&#8221; in this context is well enough understood by screen reader users to mean &#8220;required,&#8221; but it&#8217;s not exactly robust. Imagine we were marking up a quiz question about a <a href="https://en.wikipedia.org/wiki/Asterix"><span class="link">certain Gaulish cartoon character</span></a><sup><a href="#fn25_11"><span class="sup_link">11</span></a></sup>:</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"quiz-question"</span><span class="token punctuation">&gt;</span></span>What is the name of Goscinny and Uderzo’s famous cartoon Gaul? <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>"red"</span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation">=</span>"true"</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"quiz-question"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"quiz-question"</span><span class="token punctuation">&gt;</span></span></code></pre><p>More correctly, placing <a href="http://w3c.github.io/aria/aria/aria.html#aria-required"><span class="link"><code>aria-required="true"</code></span></a><sup><a href="#fn25_12"><span class="sup_link">12</span></a></sup> on the input itself will announced &#8220;Required&#8221; in the set language of the page. This just leaves us the job of silencing the asterisk, for which we can use <code>aria-hidden</code>. You can think of <code>aria-hidden="true"</code> as the aural equivalent of <code>display: none;</code>.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span><span class="token punctuation">&gt;</span></span>Your email address <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>"red"</span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation">=</span>"true"</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"email"</span> <span class="token attr-name">aria-required</span><span class="token attr-value"><span class="token punctuation">=</span>"true"</span><span class="token punctuation">&gt;</span></span></code></pre><p>(<strong>Note:</strong> Both <code>aria-hidden="true"</code> and <code>aria-required="true"</code> have explicit values rather than being written in the <a href="http://html5doctor.com/html5-forms-introduction-and-new-attributes/"><span class="link">Boolean form that is possible with certain HTML5 attributes</span></a><sup><a href="#fn25_13"><span class="sup_link">13</span></a></sup>. This is correct for ARIA attributes and significantly more reliable.)</p><h3>A Note on the <code>required</code> Attribute</h3><p>You may be aware that there is an HTML5 <code>required</code> attribute. Why aren&#8217;t we using this? Usually it is better to use the HTML5 base semantics rather than the WAI-ARIA extension, but only if vendor (read: browser and screen reader) support is acceptable. The <a href="http://caniuse.com/#feat=form-validation"><span class="link"><code>required</code> attribute is not implemented uniformly</span></a><sup><a href="#fn25_14"><span class="sup_link">14</span></a></sup> across browsers. It also tends to invoke an undesirable feature: marking empty required fields as invalid from the outset. For our purposes this is rather verbose and aggressive.</p><h2>Showing The Password</h2><p>You&#8217;ll recall the discussion on the cognitive stress of disappearing <code>placeholder</code> attributes, especially when they are unaccompanied by proper labels. Having to type a password without being able to see if you&#8217;ve hit the right keys is a matter of similar discomfort.</p><p>Some interfaces provide an auxiliary field, similar in all respects but its <code>id</code>, and implore you to type your proposed password a <em>second</em> time, so the system can compare the two. Bothersome and off-putting.</p><p>To preserve security but give users the option to check their entered password, instead we shall provide a checkbox to reveal the password at will.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>Choose a password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"checkbox"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"showPassword"</span><span class="token punctuation">&gt;</span></span> show password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></code></pre><p><img src="images/forms_show_password.png" alt="Completed password field with show password checkbox to its bottom-right." /></p><p>A short script simply toggles the field type from <code>password</code> to <code>text</code> and back again:</p><pre><code class=" language-javascript"><span class="token keyword">var</span> password <span class="token operator">=</span> document<span class="token punctuation">.</span>getElementById<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> showPassword <span class="token operator">=</span> document<span class="token punctuation">.</span>getElementById<span class="token punctuation">(</span><span class="token string">'showPassword'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

showPassword<span class="token punctuation">.</span>addEventListener<span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> type <span class="token operator">=</span> this<span class="token punctuation">.</span>checked <span class="token operator">?</span> <span class="token string">'text'</span> <span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">;</span>
    password<span class="token punctuation">.</span>setAttribute<span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Note that Internet Explorer and Microsoft Edge provide this functionality natively, using an interactive eye icon associated with the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::-ms-reveal"><span class="link"><code>::ms-reveal</code> pseudo-class</span></a><sup><a href="#fn25_15"><span class="sup_link">15</span></a></sup>. Since we&#8217;ve provided our own (cross-browser) solution, it would be wise to suppress this feature:</p><pre><code class=" language-css"><span class="token selector">input[type=password]::-ms-reveal </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>At this stage, it&#8217;s become a habit of ours, as inclusive designers, to not only improve an interface&#8217;s UX but to do so in a way that supports users in unusual circumstances or using auxiliary software. This little, screen reader accessible show-password provision is another reusable micropattern. We only have to think about and work on the accessibility aspect once.</p><h2>Validation</h2><p>Our biggest challenge is to provide an inclusive form validation experience. This involves a lot of moving parts and, without care, can produce a jarring and unusable experience for some users. The trick is in communicating two key messages during validation as separate concerns:</p><p class="list"><span class="digit">1. </span>Something is broken (the form has errors).</p><p class="list last-item"><span class="digit">2. </span>What needs fixing (what will make the form valid).</p><p>As with the HTML5 <code>required</code> attribute, there are concerns about the support and uniformity of HTML5 form validation based on browsers&#8217; interpretation of input types like <code>url</code>. There is also no functionality within HTML5 to validate a password field. In which case, we are going to rely on WAI-ARIA to indicate invalidity, with JavaScript for the actual validation (pattern matching).</p><h3>Something Is Broken</h3><p>When the user tries to submit the form, we need to check if there are any errors. If there are, we need to suppress form submission temporarily. Note that we are suppressing the submission of the form itself rather than merely the click handler on the submit button.</p><pre><code class=" language-javascript"><span class="token keyword">var</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span>getElementById<span class="token punctuation">(</span><span class="token string">'register'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
form<span class="token punctuation">.</span>addEventListener<span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span>preventDefault<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// do not submit
</span>    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This is all well and good, but literally nothing currently happens when the user tries to submit (where form errors are present). This is our cue to provide some feedback in the form of an error message. At this point, all we want to communicate is the presence of errors and that they need attention. A simple live region that is populated by the error message on an attempted submission will suffice.</p><p>Below is the initial markup. Note that I am placing the region <em>directly above</em> the submit button. Since the submit button is where the user is looking and working, this does the best job of bringing the error to their attention. Remember that users can (and will!) zoom their content. Therefore, an error which appears above the form may not even appear within the current viewport.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"error"</span> <span class="token attr-name">aria-live</span><span class="token attr-value"><span class="token punctuation">=</span>"assertive"</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span>"alert"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"submit"</span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></code></pre><p>Here&#8217;s how we populate the live region using our script:</p><pre><code class=" language-javascript"><span class="token keyword">var</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span>getElementById<span class="token punctuation">(</span><span class="token string">'register'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
form<span class="token punctuation">.</span>addEventListener<span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span>preventDefault<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// do not submit
</span>        document<span class="token punctuation">.</span>getElementById<span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Please make sure all your registration information is correct.'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4>Visual Design</h4><p>The <code>#error</code> live region should only be visible when it is populated. To ensure that the empty box is not visible in its initial state (and does not otherwise affect the form&#8217;s layout) you can employ the <code>:empty</code> pseudo-class:</p><pre><code class=" language-css"><span class="token selector">#error:empty </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>Conventionally, errors are displayed in red, so it&#8217;s advisable to give the message box a red border or background. However, you should be wary of red being the only visual characteristic that classifies the message as an error. To support at the same time screen reader users and people who cannot see color, we can prepend a warning icon containing alternative text.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"error"</span> <span class="token attr-name">aria-live</span><span class="token attr-value"><span class="token punctuation">=</span>"assertive"</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span>"alert"</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span>"img"</span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation">=</span>"error:"</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>use</span> <span class="token attr-name"><span class="token namespace">xlink:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span>"#error"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>use</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
        Please make sure all your registration information is correct.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><p><img src="images/forms_error.png" alt="A red error message with white text prefixed with a triangular warning sign containing an exclamation mark." /></p><p>When the form&#8217;s submission event is suppressed, the live region is populated, switching its display state from <code>none</code> to <code>block</code> thanks to the <code>:empty</code> pseudo-class becoming inapplicable. This population of DOM content simultaneously triggers screen readers to announce the content, including the prepended alternative text: &#8220;error: Please make sure all your registration information is correct.&#8221; Note that the role of <a href="https://www.w3.org/TR/wai-aria-1.1/#img"><span class="link"><code>img</code></span></a><sup><a href="#fn25_16"><span class="sup_link">16</span></a></sup> and <code>aria-label</code> force the <code>&lt;svg&gt;</code> element to behave like a standard <code>&lt;img/&gt;</code> element carrying an <code>alt</code> attribute with the content &#8220;error:&#8221;.</p><p>The advantage of declaring the presence of errors using a live region is that we don&#8217;t have to move the user to bring this information to their attention. Typically, form errors alert users by focusing the first invalid form field. This unexpected and unsolicited shift of position within the application risks disorientating users. In our case, the user remains focused on the submit button and is free to move back into the form to fix the errors when ready.</p><h3>What Needs Fixing</h3><p>Now we can safely move on to handling the invalid fields. Each one needs two pieces of information, available to all users (within reason):</p><p class="list"><span class="digit">1. </span>That the field is invalid.</p><p class="list last-item"><span class="digit">2. </span>What would make the field valid.</p><p>Except for the wording of error descriptions, the pattern will be the same for each invalid input, so we&#8217;ll just use the password field as an exemplar. For (1) we can deploy the well-supported <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-invalid_attribute"><span class="link"><code>aria-invalid</code></span></a><sup><a href="#fn25_17"><span class="sup_link">17</span></a></sup> attribute.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>Choose a password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">aria-invalid</span><span class="token attr-value"><span class="token punctuation">=</span>"true"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"checkbox"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"showPassword"</span><span class="token punctuation">&gt;</span></span> show password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></code></pre><p>That&#8217;s about it, really. When the user moves back into the form and focuses the input it will now announce &#8220;Invalid&#8221; (or similar) in screen readers.</p><p>You can harness the <code>aria-invalid</code> attribute to provide a visual indication too. By linking the parsable state of <code>aria-invalid="true"</code> to a visual style, you save yourself the bother of managing style and state as separate concerns. Usually a separation of concerns is beneficial, but whenever a field is marked as invalid, that&#8217;s when it should <em>look</em> invalid. Using the attribute selector for the state makes sure the form and underlying function of your interface don&#8217;t get out of sync.</p><pre><code class=" language-css"><span class="token selector">[aria-invalid="true"] </span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> url ('images/warning-icon.svg') center right<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>(Note the inclusion of a background icon for color-blind users who cannot perceive the red <code>border-color</code> change.)</p><p>Just knowing that the field is invalid is little use unless the user knows how to fix it too. For this purpose we can provide an accompanying description. In this case, the password is not acceptable because it is fewer than six characters long.</p><pre><code class=" language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span><span class="token punctuation">&gt;</span></span>Choose a password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"text"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"password"</span> <span class="token attr-name">aria-invalid</span><span class="token attr-value"><span class="token punctuation">=</span>"true"</span> <span class="token attr-name">aria-describedby</span><span class="token attr-value"><span class="token punctuation">=</span>"password-hint"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"password-hint"</span><span class="token punctuation">&gt;</span></span>Your password must be at least 6 characters long<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>"checkbox"</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>"showPassword"</span><span class="token punctuation">&gt;</span></span> show password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></code></pre><p><img src="images/forms_field_error.png" alt="The password input with error message directly below in red text, prefixed by a warning symbol." /></p><p>The <code>#password-hint</code> element is connected to the input using the <a href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span class="link"><code>aria-describedby</code></span></a><sup><a href="#fn25_18"><span class="sup_link">18</span></a></sup> attribute and the <code>password-hint</code> <code>id</code> as a cipher. That is, the description is connected much like the label. The only difference is in terms of order: the description is read last. Now, when a screen reader user focuses the input, this accessible description will be read out after the label, current value, input type and (invalid) state information. All the pieces are in place.</p><h3>Rerunning the Routine</h3><p>Some fancy form validation scripts give you live feedback as you type your text entries, letting you know whether what you type is valid <em>as</em> you type it. This can become very difficult to manage. For entries requiring a certain number of characters, the first few keystrokes are <em>always</em> going to constitute an invalid entry. So, when do we send feedback to the user and how frequently?</p><p>Not wanting to be the overbearing waiter continually interrupting customers to check in with them, we didn&#8217;t flag errors on first run. Instead, only when errors are present <em>after attempted submission</em> do we begin informing the user.</p><p>Once the user is actively engaged in <em>correcting</em> errors, I think it helpful to reward their efforts as they work. For fields now marked invalid, we could run our validation routine on each <code>input</code> event, switching <code>aria-invalid</code> from <code>false</code> to <code>true</code> where applicable.</p><pre><code class=" language-javascript"><span class="token keyword">var</span> password <span class="token operator">=</span> document<span class="token punctuation">.</span>getElementById<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
password<span class="token punctuation">.</span>addEventListener<span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    validate<span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4>Debouncing</h4><p>For users who type quickly, the above <code>validate()</code> function will fire very frequently. Not only will this produce some performance issues, but in implementations where a live region is populated and repopulated to declare invalidity, you put screen readers into &#8217;80s remix mode: &#8220;Y-your-y-your pass-your password must be at least 6 characters long.&#8221;</p><p>We want to make sure the <code>validate()</code> function is only called when the user is idle. By debouncing, we divide clusters of keypress events into blocks and only execute <code>validate()</code> once per block.</p><p>Lodash&#8217;s <a href="https://lodash.com/docs#debounce"><span class="link"><code>_.debounce</code></span></a><sup><a href="#fn25_19"><span class="sup_link">19</span></a></sup> utility accepts a <code>wait</code> parameter. In our case, we need to set this to be slightly shorter than what we imagine is the average interval between keystrokes. When debouncing, the single function execution can take place at the beginning (<code>leading</code>) or end (<code>trailing</code>) of the block. We need the validation to happen only when the user has stopped typing. Accordingly, in the <code>options</code> object, <code>options.leading</code> should be <code>false</code> and <code>options.trailing</code> <code>true</code>.</p><pre><code class=" language-javascript"><span class="token keyword">var</span> password <span class="token operator">=</span> document<span class="token punctuation">.</span>getElementById<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> handleInput <span class="token operator">=</span> _<span class="token punctuation">.</span>debounce<span class="token punctuation">(</span>validate<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    leading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    trailing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
password<span class="token punctuation">.</span>addEventListener<span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> handleInput<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Whether you actually want to implement a live region per field for feedback is up to you. Certainly, without one it won&#8217;t be immediately obvious when the field has become valid or invalid. However, since the <code>aria-invalid</code> attribute will have been set to <code>true</code> regardless, when the user blurs and refocuses the field, they will be told it is valid. Most screen readers also provide shortcuts to reannounce element information. NVDA, for example, will speak the focused password input when pressing <em>Insert</em> + <em>Tab</em>.</p><h2>Microcopy</h2><p>As ever, we need to be mindful not just of the code and the visual design but our choice of words. In forms, where labels and instructions mean the difference between succeeding to complete a form and failing, we need to take extra care &mdash; especially if the site we&#8217;re developing provides a crucial service, such as registering to vote.</p><p>The article &#8220;<a href="https://www.smashingmagazine.com/2013/06/five-ways-prevent-bad-microcopy/"><span class="link">Five Ways To Prevent Bad Microcopy</span></a><sup><a href="#fn25_20"><span class="sup_link">20</span></a></sup>&#8221; by Bill Beard offers some key pointers:</p><blockquote><p class="list"><span class="digit">1. </span>Get out your own head and get to know the user.</p><p class="list"><span class="digit">2. </span>The user is a person. Talk to them like one.</p><p class="list"><span class="digit">3. </span>Use copy as a guide, not a crutch.</p><p class="list"><span class="digit">4. </span>Treat every moment like a branding moment, even when it&#8217;s not.</p><p class="list last-item"><span class="digit">5. </span>If content is king, then treat context like a queen.</p></blockquote><p>All good advice, and I recommend you read the article in full. But I&#8217;d like to emphasize Bill&#8217;s stipulation regarding point four:</p><blockquote><p>&#8220;Your brand&#8217;s tone and voice are essential to consider when writing all of your copy, but it <strong>should not get in the way</strong> of a user who is trying to take action.&#8221;</p></blockquote><p>In other words, <em>don&#8217;t put your brand before your usability</em>. In an official capacity, WCAG echoes Bill&#8217;s sentiments with the <a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-descriptive.html"><span class="link">2.4.6 Headings and Labels</span></a><sup><a href="#fn25_21"><span class="sup_link">21</span></a></sup> success criterion, imploring that &#8220;headings and labels describe topic or purpose.&#8221; Branding whimsy in your copy can diverge too much from transparent wording, confusing and infuriating the user.</p><p>Take the password label in our registration form, for example. If our form is for an online fantasy role-playing game, it might be tempting to relabel the field &#8220;Secret incantation,&#8221; &#8220;Spell of entry,&#8221; or maybe &#8220;Cryptic charm&#8221;; all more evocative than &#8220;Password&#8221; but in danger of leaving the user wondering what they&#8217;re really being asked for.</p><h2>Summary</h2><p>By exploring a specific form pattern, this chapter has given you most everything you need to develop inclusive forms in general. It&#8217;s by using standard form elements, effective labeling, and facilitating the correction of errors that a maximal number of users are able to access and contribute to your websites and apps. But by keeping the form simple and avoiding irritating experiences &mdash; like disappearing labels, and passwords that you cannot check &mdash; we&#8217;ve made sure using the form isn&#8217;t just possible but somewhat agreeable. Well, not entirely <em>dis</em>agreeable anyway!</p><h3>Things to Avoid</h3><p class="list"><span class="bullet">•</span>Putting content that needs to be read <em>first</em> last in the source.</p><p class="list"><span class="bullet">•</span>Input focus styles that are too subtle.</p><p class="list"><span class="bullet">•</span>Missing, invisible or unassociated labels and descriptions.</p><p class="list last-item"><span class="bullet">•</span>Uninteractive content in a <code>&lt;form&gt;</code> context that isn&#8217;t associated with form fields.</p><div class="fn_overview"><p class="separator">—</p><p id="fn25_1"><span class="fn_number">1.</span><a href="https://www.w3.org/TR/WCAG20/#navigation-mechanisms"><span class="fn_link">https://www.w3.org/TR/WCAG20/#navigation-mechanisms</span></a></p><p id="fn25_2"><span class="fn_number">2.</span><a href="https://shop.smashingmagazine.com/products/apps-for-all"><span class="fn_link">https://shop.smashingmagazine.com/products/apps-for-all</span></a></p><p id="fn25_3"><span class="fn_number">3.</span><a href="http://heydonworks.com/practical_aria_examples/#tab-interface"><span class="fn_link">http://heydonworks.com/practical_aria_examples/#tab-interface</span></a></p><p id="fn25_4"><span class="fn_number">4.</span><a href="http://w3c.github.io/aria/aria/aria.html#toolbar"><span class="fn_link">http://w3c.github.io/aria/aria/aria.html#toolbar</span></a></p><p id="fn25_5"><span class="fn_number">5.</span><a href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span class="fn_link">https://www.w3.org/TR/wai-aria-1.1/#aria-pressed</span></a></p><p id="fn25_6"><span class="fn_number">6.</span><a href="https://www.w3.org/TR/WCAG20/#ensure-compat"><span class="fn_link">https://www.w3.org/TR/WCAG20/#ensure-compat</span></a></p><p id="fn25_7"><span class="fn_number">7.</span><a href="http://tink.uk/proposed-aria-password-role/"><span class="fn_link">http://tink.uk/proposed-aria-password-role/</span></a></p><p id="fn25_8"><span class="fn_number">8.</span><a href="https://twitter.com/LeaVerou/status/758386597012185088"><span class="fn_link">https://twitter.com/LeaVerou/status/758386597012185088</span></a></p><p id="fn25_9"><span class="fn_number">9.</span><a href="http://bradfrost.com/blog/post/float-label-pattern/"><span class="fn_link">http://bradfrost.com/blog/post/float-label-pattern/</span></a></p><p id="fn25_10"><span class="fn_number">10.</span><a href="https://twitter.com/mds"><span class="fn_link">https://twitter.com/mds</span></a></p><p id="fn25_11"><span class="fn_number">11.</span><a href="https://en.wikipedia.org/wiki/Asterix"><span class="fn_link">https://en.wikipedia.org/wiki/Asterix</span></a></p><p id="fn25_12"><span class="fn_number">12.</span><a href="http://w3c.github.io/aria/aria/aria.html#aria-required"><span class="fn_link">http://w3c.github.io/aria/aria/aria.html#aria-required</span></a></p><p id="fn25_13"><span class="fn_number">13.</span><a href="http://html5doctor.com/html5-forms-introduction-and-new-attributes/"><span class="fn_link">http://html5doctor.com/html5-forms-introduction-and-new-attributes/</span></a></p><p id="fn25_14"><span class="fn_number">14.</span><a href="http://caniuse.com/#feat=form-validation"><span class="fn_link">http://caniuse.com/#feat=form-validation</span></a></p><p id="fn25_15"><span class="fn_number">15.</span><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::-ms-reveal"><span class="fn_link">https://developer.mozilla.org/en-US/docs/Web/CSS/::-ms-reveal</span></a></p><p id="fn25_16"><span class="fn_number">16.</span><a href="https://www.w3.org/TR/wai-aria-1.1/#img"><span class="fn_link">https://www.w3.org/TR/wai-aria-1.1/#img</span></a></p><p id="fn25_17"><span class="fn_number">17.</span><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-invalid_attribute"><span class="fn_link">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-invalid_attribute</span></a></p><p id="fn25_18"><span class="fn_number">18.</span><a href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span class="fn_link">https://www.w3.org/TR/wai-aria-1.1/#aria-describedby</span></a></p><p id="fn25_19"><span class="fn_number">19.</span><a href="https://lodash.com/docs#debounce"><span class="fn_link">https://lodash.com/docs#debounce</span></a></p><p id="fn25_20"><span class="fn_number">20.</span><a href="https://www.smashingmagazine.com/2013/06/five-ways-prevent-bad-microcopy/"><span class="fn_link">https://www.smashingmagazine.com/2013/06/five-ways-prevent-bad-microcopy/</span></a></p><p id="fn25_21"><span class="fn_number">21.</span><a href="https://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-descriptive.html"><span class="fn_link">https://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-descriptive.html</span></a></p></div></div></body></html>
